<!DOCTYPE html>
<html>
	<head>
		<title>SPA Test</title>
		<script src="spa.js"></script>
		<link rel="stylesheet" type="text/css" href="spa.css">
	</head>

	<body>
		<script>

			var layout = document.createElement("div");
			layout.style.backgroundColor="cyan";
			var h = document.createElement("div");
			var b = document.createElement("div");
			var f = document.createElement("div");
			layout.appendChild(h);
			layout.appendChild(b);
			layout.appendChild(f);
			h.innerHTML = "header";
			f.innerHTML = "footer";

			var layout2 = document.createElement("div");
			layout2.style.backgroundColor="yellow";
			var h2 = document.createElement("div");
			var b2 = document.createElement("div");
			var f2 = document.createElement("div");
			layout2.appendChild(h2);
			layout2.appendChild(b2);
			layout2.appendChild(f2);
			h2.innerHTML = "header";
			f2.innerHTML = "footer";

			
			document.body.appendChild(layout);
			document.body.appendChild(layout2);

			var c1 = function(callback) {
				var a = document.createElement("a");
				a.innerHTML = "click";
				a.setAttribute("href", "javascript:void(0);");
				a.addEventListener("click", function() {
					SPA.openPage("bar", {}); // pass data
				});
				
				var r = document.createElement("div");
				r.appendChild(a);
				callback(r);
			};
			var c2 = function(callback) {
				var r = document.createElement("div");
				r.innerHTML = "content2";
				callback(r);
			};
			
			SPA.addPages([
				{
					path : "/foo",
					layout : layout,
					context : b,
					content : c1,
					opened : false,
					first_open : function() {
						console.log("foo first opened"); 	
					},	
					open : function() {
						console.log("foo opened");
					},
					close : function() {
						console.log("foo closed");
					}
				},
				{
					path : "/bar",
					layout : layout2,
					context : b2,
					content : c2,
					opened : false,
					first_open : function() {
						console.log("bar first opened"); 	
					},
					open : function() {
						console.log("bar opened");
					},
					close : function() {
						console.log("bar closed");
					}
				}
			]);
			SPA.start({});

		</script>
	</body>

</html>